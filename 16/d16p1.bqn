#! /usr/bin/env -S bqn -f

_FP â† { F _ğ•£ x: {F xâ†©ğ•©}â€¢_while_{xâ‰¢ğ•©} F x ; ğ•¨âŠ¸ğ”½ _ğ•£ ğ•©  }

Load â† >âˆ˜â€¢FLines

rcost â† 1000Ã— 0â€¿1â€¿2â€¿1
rcosts â† > âŒ½âŸœrcostÂ¨ -â†•â‰ rcost
mcost â† 1
moves â† âŸ¨Â»Ë˜, Â», Â«Ë˜, Â«âŸ©
Solve â† { ğ•Š map:
  epos â† âŠ‘ ('E'=map) /â—‹â¥Š â†•â‰¢map
  mask â† '#'âŠ¸=â—¶1â€¿âˆÂ¨Ë˜ map
  cost0 â† 1â€¿âˆâ€¿âˆâ€¿âˆ Ã—â‰0â€¿âˆ 'S'âŠ¸=â—¶âˆâ€¿0Â¨Ë˜ map
  Step â† { âŒŠË rcosts {ğ•¨ +â‰0â€¿âˆ ğ•©}Ë˜ moves {ğ•©âŒŠmaskÃ—1+(âŠ‘ğ•¨){ğ•ğ•©}ğ•©}Ë˜ ğ•© }
  âŒŠÂ´ eposâŠ¸âŠ‘Ë˜ Step _FP cost0
}

â€¢Showâˆ˜Solveâˆ˜LoadÂ¨ â€¢args
