#! /usr/bin/env -S bqn -f

_FP â† { F _ğ•£ x: {F xâ†©ğ•©}â€¢_while_{xâ‰¢ğ•©} F x ; ğ•¨âŠ¸ğ”½ _ğ•£ ğ•©  }

Load â† >âˆ˜â€¢FLines

rcost â† 1000Ã— 0â€¿1â€¿2â€¿1
rcosts â† > âŒ½âŸœrcostÂ¨ -â†•â‰ rcost
mcost â† 1
moves â† âŸ¨Â»Ë˜, Â», Â«Ë˜, Â«âŸ©
Solve â† { ğ•Š map:
  epos â† âŠ‘ ('E'=map) /â—‹â¥Š â†•â‰¢map
  mask â† '#'âŠ¸=â—¶1â€¿âˆÂ¨Ë˜ map
  Step â† { âŒŠË rcosts {ğ•¨ +â‰0â€¿âˆ ğ•©}Ë˜ moves âŠ‘âŠ¸{ğ•©âŒŠmaskÃ—mcost+ğ•ğ•©}Ë˜ ğ•© }

  cost0s â† 1â€¿âˆâ€¿âˆâ€¿âˆ Ã—â‰0â€¿âˆ 'S'âŠ¸=â—¶âˆâ€¿0Â¨Ë˜ map
  costS2E â† Step _FP cost0s
  score â† âŒŠÂ´ eposâŠ¸âŠ‘Ë˜ costS2E

  cost0e â† 2âŒ½ ('E'âŠ¸=â—¶âˆâ€¿1Â¨âš‡1 map) Ã—â‰2 (scoreâŠ¸=â—¶âˆâ€¿0Â¨â‰1 costS2E)
  costE2S â† Step _FP cost0e

  +Â´ â¥Š âˆ¨Ë costS2E (score=+)Ë˜ Â¯2âŒ½costE2S
}

â€¢Showâˆ˜Solveâˆ˜LoadÂ¨ â€¢args
