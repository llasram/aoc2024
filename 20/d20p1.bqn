#! /usr/bin/env -S bqn -f

_FP â† { âŠ‘ ((ğ”½â‹ˆâŠ¢)âŠ‘)â€¢_while_(â‰¢Â´) (ğ”½ğ•©)â€¿ğ•© ; ğ•¨âŠ¸ğ”½ _ğ•£ ğ•© }

Load â† >âˆ˜â€¢FLines

moves â† âŸ¨Â«, Â»Ë˜, Â», Â«Ë˜âŸ©
c0 â† -2â‹†15
Solve â† { ğ•Š map:
  mask â† '#'â‰ map
  epos â† âŠ‘ ('E'âŠ¸= /â—‹â¥Š â†•âˆ˜â‰¢) map

  Step â† { m ğ•Š c: câŒŠ âŒŠÂ´ moves {mÃ—ğ•ğ•©}Â¨ <1+c }
  e2cost â† mask Step _FP c0Ã—'E'=map
  s2cost â† mask Step _FP c0Ã—'S'=map
  base â† c0-Ëœ eposâŠ‘s2cost

  CheatSavings â† { ğ•¨ ğ•Š ğ•©:
    s2cheat â† 0âŒŠ maskÃ— ğ•ğ• 2+ s2cost
    total â† 0âŒŠ e2cost+ c0-Ëœ s2cheat
    +Â´ (base-100)â‰¥ â¥Šc0-Ëœtotal
  }
  +Â´ â¥Š> CheatSavingsâŒœËœ moves
}

â€¢Showâˆ˜Solveâˆ˜LoadÂ¨ â€¢args
