#! /usr/bin/env -S bqn -f

_FP â† { âŠ‘ ((ğ”½â‹ˆâŠ¢)âŠ‘)â€¢_while_(â‰¢Â´) (ğ”½ğ•©)â€¿ğ•© ; ğ•¨âŠ¸ğ”½ _ğ•£ ğ•© }

Load â† >âˆ˜â€¢FLines

moves â† âŸ¨Â«, Â»Ë˜, Â», Â«Ë˜âŸ©
c0 â† -2â‹†15
cdist â† 20 â‹„ cpad â† 2Ã—cdist â‹„ cwin â† 1+cpad
Solve â† { ğ•Š map:
  mask â† '#'â‰ map
  epos â† âŠ‘ ('E'âŠ¸= /â—‹â¥Š â†•âˆ˜â‰¢) map

  Step â† { m ğ•Š c: câŒŠ âŒŠÂ´ moves {mÃ—ğ•ğ•©}Â¨ <1+c }
  e2cost â† mask Step _FP c0Ã—'E'=map
  s2cost â† mask Step _FP c0Ã—'S'=map
  base â† c0-Ëœ eposâŠ‘s2cost

  âŸ¨PadâŸ© â† { Pad â‡ FË˜ (Fâ† Â»âŸcdist (cpad+â‰ )â†‘âŠ¢) }
  mdol â† +Â´Â¨ | cdist-Ëœ â†•41â€¿41
  cmask â† cdistâ‰¥ mdol
  CheatSavings â† { s2cost ğ•Š e2cost:
    s2cheat â† cmaskÃ— mdol+ s2cost
    total â† 0âŒŠ e2cost+ c0-Ëœ s2cheat
    +Â´ (base-100)â‰¥ â¥Šc0-Ëœtotal
  }
  +Â´ â¥Š s2cost CheatSavingsâ‰0â€¿2 cwinâ€¿cwinâ†• Pad e2cost
}

â€¢Showâˆ˜Solveâˆ˜LoadÂ¨ â€¢args
