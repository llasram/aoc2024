#! /usr/bin/env -S bqn -f

ToNats â† { ((>âŸœÂ«0âŠ¸â‰¤) / 0(0âŠ¸â‰¤Ã—Ã—âŸœ10âŠ¸+)`âŠ¢) 10âŠ¸â‰¤âŠ¸(Â¬âŠ¸Ã—-âŠ£) ğ•©-'0' }
Load â† { âˆ¾ ToNatsÂ¨ â€¢FLines ğ•© }

âŸ¨Xor48âŸ© â† {
  intbase â† 2â‹†52
  suffix â† Â¯1 â†‘ 64â€¿16â€¢bit._cast âŸ¨intbaseâŸ©
  ToBits â† (3 â†‘ 64â€¿16â€¢bit._castâˆ˜â‹ˆ) intbaseâŠ¸+
  FromBits â† (intbase -Ëœ âŠ‘âˆ˜(16â€¿64â€¢bit._cast)) âˆ¾âŸœsuffix
  Xor48 â‡ FromBits (16â€¢bit._xor)â—‹ToBits
}


Mix â† Xor48
Prune â† 16777216âŠ¸|
_PM â† { ğ”½ _ğ•£ ğ•©: Prune ğ•© Mix ğ”½ ğ•© }
NextSecret â† { ğ•Š n: Ã—âŸœ2048 _PM âŒŠâˆ˜Ã·âŸœ32 _PM Ã—âŸœ64 _PM n }
ScoreSequences â† { n ğ•Š tally:
  prices â† 10| NextSecretâŸ(â†•2001) n
  keys â† +âŸœ(20âŠ¸Ã—)Â´Ë˜ 10+ 4â†• -ËœÂ´Ë˜ 2â†•prices
  mask â† âˆŠ keys
  (mask/4â†“prices)âŠ¸+âŒ¾((mask/keys)âŠ¸âŠ) tally
}

Solve â† { ğ•Š initials:
  âŒˆÂ´ (0Â¨(â†•20â‹†4)) ScoreSequencesÂ´ initials
}

â€¢Showâˆ˜Solveâˆ˜LoadÂ¨ â€¢args
