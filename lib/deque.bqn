MakeDeque â† { ğ•Š saâ€¿szâ€¿fiâ€¿bi:
  Inspect â‡ {ğ•¤â‹„ saâ€¿szâ€¿fiâ€¿bi}

  Count â‡ {ğ•¤â‹„ sz}
  Capacity â‡ {ğ•¤â‹„ â‰ sa}
  IsEmpty â‡ {ğ•¤â‹„ sz=0}
  Contents â‡ {ğ•¤â‹„ sz=0 ? âŸ¨âŸ© ; fiâ‰¤bi ? szâ†‘fiâ†“sa ; (fiâ†“sa)âˆ¾((bi+1)â†‘sa)}
  Clone â‡ {ğ•¤â‹„ MakeDeque saâ€¿szâ€¿fiâ€¿bi}
  PeekFront â‡ {ğ•¤â‹„ "deque empty" ! sz>0 â‹„ fiâŠ‘sa}
  PeekBack â‡ {ğ•¤â‹„ "deque empty" ! sz>0 â‹„ biâŠ‘sa}

  Reserve â‡ {
    ğ•Š n: nâ‰¤â‰ sa ? â‰ sa ;
    ğ•Š n: {
      sa â†© nâ†‘Contents@
      bi â†© sz-1
      fi â†© 0
    }
    n
  }
  Grow â† {ğ•¤â‹„ Reserve 1âŒˆ 2âŒŠâˆ˜Ã·Ëœ 1+ 3Ã— â‰ sa }
  ShrinkToFit â‡ {ğ•¤â‹„ sa â†© Contents@ â‹„ fi â†© 0 â‹„ bi â†© sz â‹„ @}

  PushBack â‡ {
    { szâ‰¥â‰ sa ? Grow@ ; @ }
    bi ((â‰ sa)|1+âŠ¢)â†©
    sa ğ•©Ë™âŒ¾(biâŠ¸âŠ‘)â†©
    sz +â†© 1
    ğ•©
  }
  PopBack â‡ {ğ•¤
    "deque empty" ! sz>0
    x â† biâŠ‘sa
    sa 0âŒ¾(biâŠ¸âŠ‘)â†©
    bi ((â‰ sa)|Â¯1+âŠ¢)â†©
    sz -â†© 1
    x
  }

  PushFront â‡ {
    { szâ‰¥â‰ sa ? Grow@ ; @ }
    fi ((â‰ sa)|Â¯1+âŠ¢)â†©
    sa ğ•©Ë™âŒ¾(fiâŠ¸âŠ‘)â†©
    sz +â†© 1
    ğ•©
  }
  PopFront â‡ {ğ•¤
    "deque empty" ! sz>0
    x â† fiâŠ‘sa
    sa 0âŒ¾(fiâŠ¸âŠ‘)â†©
    fi ((â‰ sa)|1+âŠ¢)â†©
    sz -â†© 1
    x
  }
}

Deque â‡ { ğ•Š contents:
  sa â† { contentsâ‰¡@ ? âŸ¨âŸ© ; contents }
  MakeDeque âŸ¨sa, szâ†â‰ sa, 0, sz-1âŸ©
}

(â€¢argsâ‰¡âŸ¨"test"âŸ©)â—¶âŸ¨@, {ğ•©.RunAllğ•©}âŸ© {
  carrs â† âŸ¨"c8arr", "c16arr", "c32arr"âŸ©
  IsString â† âŠ‘ <âˆ˜â€¢internal.Type âˆŠ carrsË™
  E â† {
    IsString ğ•© ? ğ•© ;
    âˆ¾ { IsString ğ•© ? ğ•© ; â€¢Fmt ğ•© }Â¨ ğ•©
  }

  TestPushBackPopBack â‡ {ğ•¤
    d â† Deque@ â‹„ d.PushBackÂ¨ aâ†3â€¿1â€¿3â€¿3â€¿7 â‹„ gâ†d.PopBackÂ¨ â†•â‰ a
    âŸ¨"d.PopBackÂ¨ â†•â‰ w â‡’ ", g, ", want ", wâŸ© ! g â‰¡ wâ†âŒ½a
  }

  TestPushBackPopFront â‡ {ğ•¤
    d â† Deque@ â‹„ d.PushBackÂ¨ aâ†3â€¿1â€¿3â€¿3â€¿7 â‹„ gâ†d.PopFrontÂ¨ â†•â‰ a
    âŸ¨"d.PopBackÂ¨ â†•â‰ w â‡’ ", g, ", want ", wâŸ© ! g â‰¡ wâ†a
  }

  TestPushFrontPopBack â‡ {ğ•¤
    d â† Deque@ â‹„ d.PushFrontÂ¨ aâ†3â€¿1â€¿3â€¿3â€¿7 â‹„ gâ†d.PopBackÂ¨ â†•â‰ a
    âŸ¨"d.PopBackÂ¨ â†•â‰ w â‡’ ", g, ", want ", wâŸ© ! g â‰¡ wâ†a
  }

  TestPushFrontPopFront â‡ {ğ•¤
    d â† Deque@ â‹„ d.PushFrontÂ¨ aâ†3â€¿1â€¿3â€¿3â€¿7 â‹„ gâ†d.PopFrontÂ¨ â†•â‰ a
    âŸ¨"d.PopBackÂ¨ â†•â‰ w â‡’ ", g, ", want ", wâŸ© ! g â‰¡ wâ†âŒ½a
  }

  RunTest â† { name ğ•Š f:
    â€¢Out name âˆ¾ ": " âˆ¾ ("passed"âˆ˜F)âŠ("failed -- "âˆ¾Eâˆ˜â€¢CurrentError)@
  }

  RunAll â‡ { ğ•Š tests:
    (âŠ¢ RunTest testsâŠ¸â€¢ns.Get)Â¨ ("test"â‰¡4â†‘âŠ¢)Â¨âŠ¸/ â€¢ns.Keys tests
  }
}
